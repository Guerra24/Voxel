import org.gradle.internal.os.OperatingSystem

task wrapper(type: Wrapper) { gradleVersion = '3.2-rc-2' }

subprojects {
	apply plugin: "eclipse"
	apply plugin: "idea"
	apply plugin: "java"

	repositories {
		mavenCentral()
		maven { url "https://oss.sonatype.org/content/repositories/releases/" }
		maven { url "https://oss.sonatype.org/content/repositories/snapshots/" }
	}
}

project(":ashley") {
	dependencies { compile project(':utils') }
}

project(":client") {

	switch ( OperatingSystem.current() ) {
		case OperatingSystem.WINDOWS:
			project.ext.lwjglNatives = "natives-windows"
				break
		case OperatingSystem.LINUX:
			project.ext.lwjglNatives = "natives-linux"
		break
		case OperatingSystem.MAC_OS:
			project.ext.lwjglNatives = "natives-macos"
			break
	}

	project.ext.lwjglVersion = "3.1.0"

	dependencies {
		compile project(':ashley')
		compile project(':universal')
		compile project(':utils')
		compile project(':assets')
		compile 'de.jarnbjo:j-ogg-all:1.0.0'
		compile 'org.jcraft:jorbis:0.0.17'
		
		// LWJGL dependencies
		compile "org.lwjgl:lwjgl:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-glfw:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-jemalloc:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-nanovg:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-openal:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-opengl:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-stb:${lwjglVersion}"
		compile "org.lwjgl:lwjgl-vulkan:${lwjglVersion}"
		// LWJGL natives
		runtime "org.lwjgl:lwjgl:${lwjglVersion}:${lwjglNatives}"
		runtime "org.lwjgl:lwjgl-glfw:${lwjglVersion}:${lwjglNatives}"
		runtime "org.lwjgl:lwjgl-jemalloc:${lwjglVersion}:${lwjglNatives}"
		runtime "org.lwjgl:lwjgl-nanovg:${lwjglVersion}:${lwjglNatives}"
		runtime "org.lwjgl:lwjgl-openal:${lwjglVersion}:${lwjglNatives}"
		runtime "org.lwjgl:lwjgl-stb:${lwjglVersion}:${lwjglNatives}"
		
		testCompile group: 'junit', name: 'junit', version: '4.12'
	}
}

project(":server") {
	dependencies {
		compile project(':ashley')
		compile project(':universal')
		compile project(':utils')
		testCompile group: 'junit', name: 'junit', version: '4.12'
	}
}

project(":launcher") {
	dependencies {
		testCompile group: 'junit', name: 'junit', version: '4.12'
	}
}

project(":universal") {
	dependencies {
		compile 'org.codehaus.groovy:groovy:2.4.7'
		compile 'org.codehaus.groovy:groovy-jsr223:2.4.7'
		compile project(':ashley')
		compile project(':utils')
		testCompile group: 'junit', name: 'junit', version: '4.12'
	}
}

project(":utils") {
	dependencies {
		compile 'log4j:log4j:1.2.17'
		compile 'com.esotericsoftware:kryo:4.0.0'
		compile 'com.esotericsoftware:jsonbeans:0.7'
		compile group: 'com.google.code.findbugs', name: 'jsr305', version: '3.0.1'
		testCompile group: 'junit', name: 'junit', version: '4.12'
	}
}
